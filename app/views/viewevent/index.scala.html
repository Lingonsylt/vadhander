@(event : Event)
@main {
} {
    <script src="@routes.Assets.at("javascripts/viewevent/main.js")" type="text/javascript"></script>
} {
    @if(event != null){
        <div class="event-title-div">
            <h1>@event.caption</h1>
        </div>

        <div class="event-content-box">
            <h3>Information</h3>
            <dl>
                <dt>Skapat av: </dt>
                <dd>@event.creator.getFullName</dd>
                <dt>Datum och tid: </dt>
                <dd>@event.event_time</dd>
                <dt>Plats: </dt>
                <dd>@event.location</dd>
                @* <dd>@event.latitude, @event.longitude</dd>  *@
            </dl>
            <!-- <button class="btn btn-success btn-large">Delta</button>
            <button class="btn btn-danger btn-large">Delta inte</button>   -->
        </div>


        <div class="event-content-box" id="descr-div">
            @if(event.description == null && event.road_description == null) {
                <p class="lead">Ingen beskrivning finns för detta evenemang.</p>
            } else {
                @if(event.description != null) {
                    <h3>Beskrivning</h3>
                    <input type="button" class="btn btn-info" value="Redigera" id="edit-button" onclick="editDescription()" />
                    <p id="description">@event.description</p>
                }
        </div>
        <div class="event-content-box">
                @if(event.road_description != null) {
                    <h3>Vägbeskrivning</h3>
                    @event.road_description
                }
            }
        </div>

       @* <div class="event-content-box">
            <h3>Deltagare</h3>
            <h4>@(event.attending.size())st</h4>  <!-- Hitta totalt antal deltagare för ett event -->
            <div class="event-participants">
                <table class="table table-condensed">
                    <tr>
                        <th>Deltagare</th>
                    </tr>
                    @for(attending : Attending <- event.attending){
                        <tr>
                            <td><a href="#">@(attending.user.getFullName())</a></td>
                        </tr>
                    }         *@
        <!--        </table>
            </div>
        </div>  -->


        <!-- <div class="event-content-box">

            <h3>Kommentarer</h3>

            <div class="write-comment">
                <h4>Skriv kommentar:</h4>
                <form class="form-horizontal">
                    <textarea id="comment_text" rows="2" class="write-comment-textarea"></textarea>
                    <input type="submit" class="btn btn-info write-comment-button" value="Kommentera"/>
                </form>
            </div>
            <hr class="comment-separator-line">

            <div class="comments-box">
                <ul class="comments">               -->
@*                    @for(comment : Comment <- event.comments) {
                        <li>
                            <div class="comment-entry-commenter">
                                <a href="#">@comment.user.getFullName</a>
                            </div>
                            <div class="text comment-entry-content">
                                @comment.text
                            </div>
                            <div class="text comment-action-bar">
                                <a href="#"><em>Svara</em></a>
                                @if(comment.user == event.creator){ <!-- inte event.creator, utan ex. currentUser -->
                                    <a href="#"><em>Ta bort</em></a>
                                }
                            </div>
                        </li>
                    }
                </ul>
            </div>
        </div>    *@

    } else {
        <h1>Evenmanget du letar efter går inte att hitta.</h1>
    }
}

<script>
    function editDescription() {
        div = document.getElementById("descr-div");
        editButton = document.getElementById("edit-button");
        paragraph = document.getElementById("description");

        if(paragraph.innerHTML != "Det finns ingen beskrivning till eventet."){
            var paragraphText = document.createTextNode(paragraph.innerHTML);
        }
        else{
            paragraphText = document.createTextNode("");
        }



        var textArea = document.createElement("TEXTAREA");
        textArea.appendChild(paragraphText);
        textArea.setAttribute("rows", "8");
        textArea.setAttribute("id", "editDescriptionTextArea");
        div.appendChild(textArea);

        editButton.setAttribute("value", "Spara");
        editButton.setAttribute("onclick", "saveDescription()");

        paragraph.parentNode.removeChild(paragraph);
    }

    function saveDescription() {
        div = document.getElementById("descr-div");
        saveButton = document.getElementById("edit-button");
        textArea = document.getElementById("editDescriptionTextArea");

        if(textArea.value != ""){
            var textAreaText = document.createTextNode(textArea.value);
        }
        else {
            textAreaText = document.createTextNode("Det finns ingen beskrivning till eventet.");
        }

        var paragraph = document.createElement("p");
        paragraph.appendChild(textAreaText);

        //How to set event.description to be the input of the textArea?

        paragraph.setAttribute("id", "description");
        div.appendChild(paragraph);

        saveButton.setAttribute("value", "Redigera");
        saveButton.setAttribute("onclick", "editDescription()");

        textArea.parentNode.removeChild(textArea);
    }
</script>